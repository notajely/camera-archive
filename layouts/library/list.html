{{- define "main" }}

{{- if (and site.Params.profileMode.enabled .IsHome) }}
{{- partial "index_profile.html" . }}
{{- else }} {{/* if not profileMode */}}

{{- if .Content }}
<div class="post-content">
    {{- .Content }}
</div>
{{- end }}

<div class="library-grid">
    {{- range .Pages }}
    <article class="post-entry camera-card library-card">
        <div class="card-details">
            <header class="entry-header">
                <h2 class="entry-hint-parent">
                    {{- .Title }}
                </h2>
            </header>

            <div class="card-specs" style="margin-bottom: 15px;">
                <span class="mount-pill">{{ .Params.category }}</span>
                {{ if .Params.language }}
                <span class="mount-pill" style="background: var(--tertiary); color: var(--theme);">{{ .Params.language
                    }}</span>
                {{ end }}
            </div>

            <div class="entry-content">
                <p>{{ .Summary | plainify | htmlUnescape | truncate 120 }}</p>
            </div>

            <footer class="entry-footer" style="margin-top: auto; padding-top: 15px; display: flex; gap: 10px;">
                <a href="{{ .RelPermalink }}" class="status-badge"
                    style="text-decoration: none; flex: 1; text-align: center; background: var(--primary); color: var(--theme) !important;">PREVIEW</a>
                <a href="{{ .Params.file_path | relURL }}" class="status-badge"
                    style="text-decoration: none; flex: 1; text-align: center; border: 1px solid var(--primary); background: transparent; color: var(--primary) !important;">DOWNLOAD</a>
            </footer>
        </div>
    </article>
    {{- end }}
</div>

{{- end }}{{/* end profileMode */}}
{{- end }}{{/* end main */}}